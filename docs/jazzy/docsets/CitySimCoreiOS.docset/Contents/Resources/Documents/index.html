<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CitySimCoreiOS  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="CitySimCoreiOS  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">CitySimCoreiOS Docs</a> (65% documented)</p>
        <p class="header-right"><a href="https://github.com/SteveRohrlack/CitySimCore"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">CitySimCoreiOS Reference</a>
        <img id="carat" src="img/carat.png" />
        CitySimCoreiOS  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BudgetActor.html">BudgetActor</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/City.html">City</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElectricityActor.html">ElectricityActor</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/CityMapError.html">CityMapError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CityMapEvents.html">CityMapEvents</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Condition.html">Condition</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MapStatistic.html">MapStatistic</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PloppableType.html">PloppableType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PropableType.html">PropableType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RessourceType.html">RessourceType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums.html#/s:O14CitySimCoreiOS20StatisticsLayerError">StatisticsLayerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TileLayerError.html">TileLayerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TileType.html">TileType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZoneableType.html">ZoneableType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14CitySimCoreiOSoi1pFTPS_10Locateable_Si_PS0__">+(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14CitySimCoreiOSoi2eeFTOS_8TileTypeS0__Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14CitySimCoreiOSoi2eeFTOS_12MapStatisticS0__Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14CitySimCoreiOSoi2eeFTVS_8LocationS0__Sb">==(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Acting.html">Acting</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Array2DMapping.html">Array2DMapping</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Budgetable.html">Budgetable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Conditionable.html">Conditionable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Containing.html">Containing</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/EventEmitting.html">EventEmitting</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P14CitySimCoreiOS11EventNaming">EventNaming</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/EventSubscribing.html">EventSubscribing</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Locateable.html">Locateable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/MapStatistical.html">MapStatistical</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P14CitySimCoreiOS13NotRemoveable">NotRemoveable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P14CitySimCoreiOS15PlaceNearStreet">PlaceNearStreet</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Ploppable.html">Ploppable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Propable.html">Propable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/RessourceConsuming.html">RessourceConsuming</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/RessourceProducing.html">RessourceProducing</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StatisticsLayering.html">StatisticsLayering</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Tileable.html">Tileable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Zoneable.html">Zoneable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Budget.html">Budget</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CityMap.html">CityMap</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ConditionContainer.html">ConditionContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Location.html">Location</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapStatisticContainer.html">MapStatisticContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Ressources.html">Ressources</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Simulation.html">Simulation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SmallCommercialZone.html">SmallCommercialZone</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SmallIndustrialZone.html">SmallIndustrialZone</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SmallParkPlopp.html">SmallParkPlopp</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SmallResidentialZone.html">SmallResidentialZone</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StatisticlayersContainer.html">StatisticlayersContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StatisticsLayer.html">StatisticsLayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StreetPlopp.html">StreetPlopp</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TileLayer.html">TileLayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TreeProp.html">TreeProp</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WaterProp.html">WaterProp</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p>This is sort of my personal swift playground - nothing special.</p>
<a href='#citysimcore' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='citysimcore'>CitySimCore</h1>

<p>I&rsquo;ll be working on a simplistic city simulation. This repository
is intended to represent only the simulation data and logic, no UI.</p>

<p>The simulation works on a 2D representation of a city.</p>
<a href='#data_structure' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='data_structure'>Data structure</h2>

<p>The following describes the current state of the data structure
the simulation will use.</p>

<p>This section is also meant to elaborate on and describe
specific terms related to the data structure.</p>
<a href='#overview' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='overview'>Overview</h3>
<a href='#city' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='city'>City</h3>

<p>The <q>City</q> is composed of a multi-layerd map (see CityMap) and
multiple statistical information.</p>

<p>These information include:</p>

<ul>
<li><strong>Budget:</strong> current budget and ongoing cost</li>
<li><strong>Ressources:</strong> current supply and demand for ressources</li>
<li><strong>Population:</strong> current population count</li>
</ul>
<a href='#citymap' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='citymap'>CityMap</h3>

<p>The map is composed of multiple <q>layers</q>, each holding information
regarding a different aspects of the map (for example: land value).</p>
<a href='#cell' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='cell'>Cell</h3>

<p>A single address (1x1) on a layer is called a <q>cell</q>.</p>
<a href='#layer' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='layer'>Layer</h3>

<p>There are currently two different types of layers:</p>

<ul>
<li>TileLayer: contains <q>tiles</q></li>
<li>StatisticsLayer: contains statistic information</li>
</ul>
<a href='#tile_layer' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='tile_layer'>Tile Layer</h4>

<p>This layer may contain several <q>tiles</q>.</p>
<a href='#statistic_layer' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='statistic_layer'>Statistic Layer</h4>

<p>A StatisticLayer contains numeric values regarding statistics for
a certain aspect of the map.</p>

<p>Statistical values are numeric.</p>

<p>If statistical values overlap, they add up.</p>

<p>It is planned to implement numerous statistical layers, for example:</p>

<ul>
<li>Air Pollution</li>
<li>Noise</li>
<li>Fire Hazzard</li>
<li>Crime Probability</li>
<li>Land Value</li>
<li>etc.</li>
</ul>
<a href='#tile' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='tile'>Tile</h3>

<p>A tile must cover at least one cell.
If a tile covers multiple cells, each cell holds a corresponding
tile object.</p>

<p>All tiles are based on a protocol called <q>Locateable</q>. It contains
properties and functions that allow an object to be located on
a layer.</p>

<p>Three different types of tiles exist:</p>

<ul>
<li>Propable</li>
<li>Ploppable</li>
<li>Zoneable</li>
</ul>

<p>Each tile type needs to function slightly different.</p>
<a href='#tile_type_propable' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='tile_type_propable'>Tile Type: Propable</h4>

<p>This type of tile describes map objects that function as
more or less decorative objects.</p>

<p>Examples include: water, tree, rock, mountain</p>
<a href='#tile_type_ploppable' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='tile_type_ploppable'>Tile Type: Ploppable</h4>

<p>A <q>ploppable</q> is a predefined tile that can be added to the map.
Most ploppables have statistical effects (for example: a park has
a positive statistical value associated with the land value layer).
A ploppable has a cost for buying it and ongoing cost to cover it&rsquo;s operation.</p>

<p>Examples include: park, hospital, street</p>
<a href='#tile_type_zoneable' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='tile_type_zoneable'>Tile Type: Zoneable</h4>

<p>Zoneables are tiles that are filled with buildings by the simulation.</p>

<p>The act of filling a zoneable is called <q>growing</q>.</p>

<p>Examples include: residential zone, commercial zone, industrial zone</p>
<a href='#tile_attributes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='tile_attributes'>Tile Attributes</h4>

<p>Tiles may also adopt one or more of the following behaviours.
These behaviours are implemented using protocol composition.</p>

<ul>
<li><strong>not destructable:</strong> tile can not be removed from map</li>
<li><strong>must be placed near street:</strong> tile must be adjacent to street</li>
<li><strong>includes map statistics:</strong> tile contains statistic information</li>
<li><strong>can have conditions:</strong> condition example: on fire</li>
<li><strong>contains budget information:</strong> one time cost and/or running cost</li>
<li><strong>produces one ressource:</strong> see <q>Ressources</q></li>
<li><strong>consumes one or more ressources:</strong> see <q>Ressources</q></li>
</ul>
<a href='#example_content_objects_with_attributes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='example_content_objects_with_attributes'>example content objects with attributes</h5>

<p><img src="https://raw.githubusercontent.com/SteveRohrlack/CitySimCore/master/docs/readme/content-objects-examples.png" alt="image"></p>
<a href='#ressources' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='ressources'>Ressources</h3>

<p>There will be two distinct ressources in the simulation that can be
produced and consumed.</p>

<ul>
<li>electricity</li>
<li>water</li>
</ul>
<a href='#event_system' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='event_system'>Event system</h2>

<p>The following objects are emitting events by adopting the <q>EventEmitting</q>
protocol.</p>

<p>Each event is given a payload.</p>

<p>Actors (see <q>Actors</q>) heavily make use of the event system.</p>
<a href='#citymapevents' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='citymapevents'>CityMapEvents</h3>

<ul>
<li>Event <q>AddTile</q>, payload of type <q>Tileable</q></li>
<li>Event <q>RemoveTile</q>, payload of type <q>Tileable</q></li>
</ul>
<a href='#simulation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='simulation'>Simulation</h2>
<a href='#timeframe' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='timeframe'>Timeframe</h3>

<p>The simulation is advanced in defined time intervals.
Such an interval is called <q>tick</q>.</p>
<a href='#statistic_map_data' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='statistic_map_data'>Statistic map data</h3>

<p>By combining the numeric values of all statistical layers for
a defined location (cell or tile), a <q>quality</q> score can be
calculated and used throughout the simulation.</p>

<p>This allows, for example, to choose fitting locations for
<q>growing</q> buildings in zoneables.</p>
<a href='#actors' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='actors'>Actors</h3>

<p>Actors are lightweight objects that advance the simluation state. They should,
however, not contain any state themself.</p>

<p>Actors are added to the simulation as needed. For example, you may not want to
add the FireActor, responsible for starting fires, right away but later on when
the player can handle such events - thus allowing a smoother learning curve for the
player.</p>

<p>Actors make use of the event system so they can react to certain situations.</p>

<p>It is planned to implement numerous actors, for example:</p>

<ul>
<li><strong>BudgetActor:</strong> manages budget</li>
<li><strong>ElectricityActor:</strong> manages electricity</li>
<li><strong>WaterActor:</strong> manages water</li>
<li><strong>FireActor:</strong> manages fires</li>
<li><strong>CrimeActor:</strong> manages crimes</li>
<li><strong>ZoneDevelopmentActor:</strong> manages zone development</li>
</ul>
<a href='#budget' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='budget'>Budget</h4>

<p>The <q>Budget</q> actor updates the currently available budget.</p>

<p>It subscribes to the <q>AddTile</q> and <q>RemoveTile</q> events of the CityMap.</p>

<p>When adding or removing a tile to/from the TileLayer that contain cost,
(are <q>Budgetable</q>) they will be handled by this actor.</p>

<p>It runs every 10 ticks and subtracts the current total ongoing cost
from the budget and adds collected taxes to it.</p>
<a href='#electricity' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='electricity'>Electricity</h4>

<p>The <q>Electricity</q> actor manages the current state of production and
consumption of electricity.</p>

<p>It subscribes to the <q>AddTile</q> and <q>RemoveTile</q> events of the CityMap.</p>

<p>When adding or removing a tile to/from the TileLayer that produce or
consume ressources (are <q>RessourceProducing</q> or <q>RessourceConsuming</q>),
they will be handled by this actor.</p>
<a href='#progress' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='progress'>Progress</h2>

<p>I&rsquo;m currently extending the data model for non-map related statistics.
Also, the <q>Actor</q> api is beeing created and tested by implementing actors.</p>
<a href='#setup' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='setup'>setup</h2>
<pre class="highlight plaintext"><code>bundle install
</code></pre>
<a href='#docs' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='docs'>Docs</h2>

<p>Docs are generated using jazzy. To update, run:</p>
<pre class="highlight plaintext"><code>bundle exec "jazzy"
</code></pre>
<a href='#qa' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='qa'>QA</h2>
<a href='#travis' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='travis'>Travis</h3>

<p><a href="https://travis-ci.org/SteveRohrlack/CitySimCore"><img src="https://travis-ci.org/SteveRohrlack/CitySimCore.svg?branch=master" alt="Build Status"></a></p>
<a href='#codeclimate' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='codeclimate'>CodeClimate</h3>

<p><a href="https://codeclimate.com/github/SteveRohrlack/CitySimCore"><img src="https://codeclimate.com/github/SteveRohrlack/CitySimCore/badges/gpa.svg" alt="Code Climate"></a></p>

<p><a href="https://codeclimate.com/github/SteveRohrlack/CitySimCore"><img src="https://codeclimate.com/github/SteveRohrlack/CitySimCore/badges/issue_count.svg" alt="Issue Count"></a></p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="" target="_blank" rel="external">Steve Rohrlack</a>. All rights reserved. (Last updated: 2016-05-31)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
